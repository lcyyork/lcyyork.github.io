<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> setting up WSL2 | The <strong>Li</strong> Group </title> <meta name="author" content="Chenyang Li"> <meta name="description" content="a step-by-step guide to installing WSL2 on Windows 11 Home Edition"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' data: https:; media-src 'self' https:; frame-src 'self' https:; connect-src 'self' https:;"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?v=a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?v=f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?v=62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?v=591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/avatar.png?v=ed4677bca54186573f43365efaf05f15"> <link rel="stylesheet" href="/assets/css/main.css?v=d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://lcyyork.github.io/blog/2024/wsl2/"> <script src="/assets/js/theme.js?v=5fea5159b787642c1bbc1f334d60f883"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?v=5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "setting up WSL2",
            "description": "a step-by-step guide to installing WSL2 on Windows 11 Home Edition",
            "published": "September 28, 2024",
            "authors": [
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> The <strong>Li</strong> Group </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">research </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">people </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/people/">members</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/alumni/">alumni</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/gallery/">gallery</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">resources </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/blog/">blog</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/books/">bookshelf</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="fa-solid fa-magnifying-glass"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-half-sun-moon" id="light-toggle-system"></i> <i class="fa-solid fa-moon" id="light-toggle-dark"></i> <i class="fa-solid fa-sun" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>setting up WSL2</h1> <p>a step-by-step guide to installing WSL2 on Windows 11 Home Edition</p> </d-title> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h2"> <a href="#1-enable-virtualization-and-required-features">1. Enable Virtualization and Required Features</a> <ul> <li class="toc-entry toc-h3"><a href="#11-install-hyper-v-windows-11-home-only">1.1 Install Hyper-V (Windows 11 Home Only)</a></li> <li class="toc-entry toc-h3"><a href="#12-enable-windows-features">1.2 Enable Windows Features</a></li> </ul> </li> <li class="toc-entry toc-h2"> <a href="#2-install-wsl2">2. Install WSL2</a> <ul> <li class="toc-entry toc-h3"><a href="#21-open-powershell-or-command-prompt">2.1 Open PowerShell or Command Prompt</a></li> <li class="toc-entry toc-h3"><a href="#22-update-wsl-and-set-default-version">2.2 Update WSL and Set Default Version</a></li> <li class="toc-entry toc-h3"><a href="#23-list-available-linux-distributions">2.3 List Available Linux Distributions</a></li> <li class="toc-entry toc-h3"><a href="#24-install-ubuntu-recommended-2204-lts">2.4 Install Ubuntu (Recommended: 22.04 LTS)</a></li> <li class="toc-entry toc-h3"><a href="#25-move-ubuntu-to-another-drive-optional">2.5 Move Ubuntu to Another Drive (Optional)</a></li> </ul> </li> <li class="toc-entry toc-h2"> <a href="#3-configure-proxy-networking-optional">3. Configure Proxy Networking (Optional)</a> <ul> <li class="toc-entry toc-h3"><a href="#31-install-clash">3.1 Install Clash</a></li> <li class="toc-entry toc-h3"><a href="#32-configure-wslconfig">3.2 Configure .wslconfig</a></li> <li class="toc-entry toc-h3"><a href="#33-close-wsl">3.3 Close WSL</a></li> <li class="toc-entry toc-h3"><a href="#34-test-connection">3.4 Test Connection</a></li> </ul> </li> </ul> </nav> </d-contents> <p>This tutorial describes how to set up WSL2 (Windows Subsystem for Linux) on Windows 11 Home Edition as in September 2024. The guide is adapted and consolidated from several online resources.</p> <p>Check these blogs (in Chinese):</p> <ol> <li> <a href="https://blog.csdn.net/qq_39316962/article/details/139927197" target="_blank" rel="external nofollow noopener"> Windows 11 搭建 WSL2 运行环境（2024）- CSDN博客 </a><d-footnote>https://blog.csdn.net/qq_39316962/article/details/139927197</d-footnote> </li> <li> <a href="https://www.abackup.com/enterprise-backup/win11-cannot-find-hyper-v-6540.html" target="_blank" rel="external nofollow noopener"> 为什么Win11找不到Hyper-V？怎么解决？</a><d-footnote>https://www.abackup.com/enterprise-backup/win11-cannot-find-hyper-v-6540.html</d-footnote> </li> </ol> <h2 id="1-enable-virtualization-and-required-features">1. Enable Virtualization and Required Features</h2> <h3 id="11-install-hyper-v-windows-11-home-only">1.1 Install Hyper-V (Windows 11 Home Only)</h3> <p>Windows 11 Professional users can skip this step.</p> <ol> <li>Create a file named <code class="language-plaintext highlighter-rouge">win11-home-hyperv.bat</code> </li> <li>Add the following content: <div class="language-bat highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">pushd</span> <span class="s2">"</span><span class="vm">%~dp0</span><span class="s2">"</span>
<span class="nb">dir</span> <span class="na">/b </span><span class="nv">%SystemRoot%</span>\servicing\Packages\<span class="o">*</span><span class="kd">Hyper</span><span class="na">-V</span><span class="o">*</span>.mum <span class="o">&gt;</span><span class="kd">hyper</span><span class="na">-v</span>.txt
<span class="k">for</span> <span class="na">/f </span><span class="vm">%%i</span> <span class="k">in</span> <span class="o">(</span><span class="s1">'findstr /i . hyper-v.txt 2</span><span class="se">^&gt;</span><span class="s1">nul'</span><span class="o">)</span> <span class="k">do</span> <span class="nb">dism</span> <span class="na">/online /norestart /add-package</span>:<span class="s2">"</span><span class="nv">%SystemRoot%</span><span class="s2">\servicing\Packages\</span><span class="vm">%%i</span><span class="s2">"</span>
<span class="nb">del</span> <span class="kd">hyper</span><span class="na">-v</span>.txt
<span class="kd">Dism</span> <span class="na">/online /enable-feature /featurename</span><span class="nl">:Microsoft</span><span class="na">-Hyper-V-All /LimitAccess /ALL
</span></code></pre></div> </div> </li> <li>Right-click the file and run as Administrator.</li> </ol> <h3 id="12-enable-windows-features">1.2 Enable Windows Features</h3> <ol> <li>Open Control Panel</li> <li>Go to Programs → Turn Windows features on or off</li> <li>Enable: <ul> <li>Hyper-V</li> <li>Windows Subsystem for Linux</li> <li>Virtual Machine Platform</li> </ul> </li> <li>Click OK and restart your computer.</li> </ol> <h2 id="2-install-wsl2">2. Install WSL2</h2> <h3 id="21-open-powershell-or-command-prompt">2.1 Open PowerShell or Command Prompt</h3> <p>Check available WSL commands:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --help
</code></pre></div></div> <h3 id="22-update-wsl-and-set-default-version">2.2 Update WSL and Set Default Version</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --update
wsl --set-default-version 2
</code></pre></div></div> <h3 id="23-list-available-linux-distributions">2.3 List Available Linux Distributions</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --list --online
</code></pre></div></div> <h3 id="24-install-ubuntu-recommended-2204-lts">2.4 Install Ubuntu (Recommended: 22.04 LTS)</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --install -d Ubuntu-22.04
</code></pre></div></div> <p>By default, Linux will be installed on the system drive (C:).</p> <h3 id="25-move-ubuntu-to-another-drive-optional">2.5 Move Ubuntu to Another Drive (Optional)</h3> <p>If your C: drive has limited space, you can migrate the distribution. Here we move <code class="language-plaintext highlighter-rouge">Ubuntu-22.04</code> to D: drive and rename it to <code class="language-plaintext highlighter-rouge">Ubuntu-22.04-D</code>.</p> <p><strong>2.5.1: Check and Stop Running Distributions</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl -l -v
wsl --terminate Ubuntu-22.04
</code></pre></div></div> <p><strong>2.5.2: Export the Distribution</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --export Ubuntu-22.04 D:\ubuntu2204-export.tar
</code></pre></div></div> <p><strong>2.5.3: Unregister the Original Distribution</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --unregister Ubuntu-22.04
</code></pre></div></div> <p><strong>2.5.4: Import to a New Location</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --import Ubuntu-22.04-D D:\Ubuntu-22.04 D:\ubuntu2204-export.tar --version 2
</code></pre></div></div> <p>After completion:</p> <ul> <li>You can open <code class="language-plaintext highlighter-rouge">Ubuntu-22.04-D</code> from the PowerShell terminal.</li> <li>Linux files are accessible through Windows File Explorer.</li> </ul> <h2 id="3-configure-proxy-networking-optional">3. Configure Proxy Networking (Optional)</h2> <p>If you need proxy access:</p> <h3 id="31-install-clash">3.1 Install Clash</h3> <p>Install Clash and enable:</p> <ul> <li>Proxy configuration</li> <li>Allow LAN option</li> </ul> <h3 id="32-configure-wslconfig">3.2 Configure .wslconfig</h3> <p>Create a file:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\Users\&lt;your-username&gt;\.wslconfig
</code></pre></div></div> <p>Add:</p> <div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[experimental]</span><span class="w">
</span><span class="py">autoMemoryReclaim</span><span class="p">=</span><span class="s">gradual</span>
<span class="py">networkingMode</span><span class="p">=</span><span class="s">mirrored</span>
<span class="py">dnsTunneling</span><span class="p">=</span><span class="s">true</span>
<span class="py">firewall</span><span class="p">=</span><span class="s">true</span>
<span class="py">autoProxy</span><span class="p">=</span><span class="s">true</span>
</code></pre></div></div> <h3 id="33-close-wsl">3.3 Close WSL</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl --shutdown
</code></pre></div></div> <h3 id="34-test-connection">3.4 Test Connection</h3> <p>Start a new WSL and test connection:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget www.google.com
</code></pre></div></div> <p>If successful, your proxy configuration is working correctly.</p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> <d-article> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/forte/">installing Psi4 and Forte</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/ssh-tunnel/">cluster witout internet connection</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/centos6/">installing CentOS 6 on a cluster node</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/writing-papers/">writing scientific papers</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/basic-qc/">tutorials for quantum chemistry</a> </li> <br> <br> </d-article> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Chenyang Li. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script src="/assets/js/distillpub/overrides.js"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?v=85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?v=2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?v=c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/assets/js/copy_code.js?v=c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?v=d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?v=a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?v=2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?v=f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?v=a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?v=6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?v=ccc841c459bfc0e64c1c2b5acd10df02"></script> </body> </html>